import{a as J,b as Z}from"./chunk-ON5OQYWL.js";var P=J((me,R)=>{"use strict";var B=Object.defineProperty,q=Object.getOwnPropertyDescriptor,z=Object.getOwnPropertyNames,H=Object.prototype.hasOwnProperty,Q=(r,e)=>{for(var t in e)B(r,t,{get:e[t],enumerable:!0})},X=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of z(e))!H.call(r,n)&&n!==t&&B(r,n,{get:()=>e[n],enumerable:!(o=q(e,n))||o.enumerable});return r},ee=r=>X(B({},"__esModule",{value:!0}),r),T={};Q(T,{BotOutcome:()=>te,GameSpeed:()=>re});R.exports=ee(T);var te={Victory:"victory",Defeat:"defeat",Draw:"draw",Error:"error",None:"none"},re={Fast:"fast",Normal:"normal",Paused:"paused"}});var u=Z(P());var F=(r=0)=>e=>`\x1B[${e+r}m`,_=(r=0)=>e=>`\x1B[${38+r};5;${e}m`,E=(r=0)=>(e,t,o)=>`\x1B[${38+r};2;${e};${t};${o}m`,s={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},k=Object.keys(s.modifier),C=Object.keys(s.color),w=Object.keys(s.bgColor),I=[...C,...w];function oe(){let r=new Map;for(let[e,t]of Object.entries(s)){for(let[o,n]of Object.entries(t))s[o]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},t[o]=s[o],r.set(n[0],n[1]);Object.defineProperty(s,e,{value:t,enumerable:!1})}return Object.defineProperty(s,"codes",{value:r,enumerable:!1}),s.color.close="\x1B[39m",s.bgColor.close="\x1B[49m",s.color.ansi=F(),s.color.ansi256=_(),s.color.ansi16m=E(),s.bgColor.ansi=F(10),s.bgColor.ansi256=_(10),s.bgColor.ansi16m=E(10),Object.defineProperties(s,{rgbToAnsi256:{value(e,t,o){return e===t&&t===o?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(o/255*5)},enumerable:!1},hexToRgb:{value(e){let t=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!t)return[0,0,0];let[o]=t;o.length===3&&(o=[...o].map(l=>l+l).join(""));let n=Number.parseInt(o,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:e=>s.rgbToAnsi256(...s.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){if(e<8)return 30+e;if(e<16)return 90+(e-8);let t,o,n;if(e>=232)t=((e-232)*10+8)/255,o=t,n=t;else{e-=16;let i=e%36;t=Math.floor(e/36)/5,o=Math.floor(i/6)/5,n=i%6/5}let l=Math.max(t,o,n)*2;if(l===0)return 30;let a=30+(Math.round(n)<<2|Math.round(o)<<1|Math.round(t));return l===2&&(a+=60),a},enumerable:!1},rgbToAnsi:{value:(e,t,o)=>s.ansi256ToAnsi(s.rgbToAnsi256(e,t,o)),enumerable:!1},hexToAnsi:{value:e=>s.ansi256ToAnsi(s.hexToAnsi256(e)),enumerable:!1}}),s}var ne=oe(),c=ne;var v=(()=>{if(navigator.userAgentData){let r=navigator.userAgentData.brands.find(({brand:e})=>e==="Chromium");if(r&&r.version>93)return 3}return/\b(Chrome|Chromium)\//.test(navigator.userAgent)?1:0})(),D=v!==0&&{level:v,hasBasic:!0,has256:v>=2,has16m:v>=3},le={stdout:D,stderr:D},G=le;function $(r,e,t){let o=r.indexOf(e);if(o===-1)return r;let n=e.length,l=0,a="";do a+=r.slice(l,o)+e+t,l=o+n,o=r.indexOf(e,l);while(o!==-1);return a+=r.slice(l),a}function L(r,e,t,o){let n=0,l="";do{let a=r[o-1]==="\r";l+=r.slice(n,a?o-1:o)+e+(a?`\r
`:`
`)+t,n=o+1,o=r.indexOf(`
`,n)}while(o!==-1);return l+=r.slice(n),l}var{stdout:V,stderr:Y}=G,M=Symbol("GENERATOR"),d=Symbol("STYLER"),h=Symbol("IS_EMPTY"),U=["ansi","ansi","ansi256","ansi16m"],p=Object.create(null),se=(r,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let t=V?V.level:0;r.level=e.level===void 0?t:e.level};var ie=r=>{let e=(...t)=>t.join(" ");return se(e,r),Object.setPrototypeOf(e,y.prototype),e};function y(r){return ie(r)}Object.setPrototypeOf(y.prototype,Function.prototype);for(let[r,e]of Object.entries(c))p[r]={get(){let t=x(this,N(e.open,e.close,this[d]),this[h]);return Object.defineProperty(this,r,{value:t}),t}};p.visible={get(){let r=x(this,this[d],!0);return Object.defineProperty(this,"visible",{value:r}),r}};var S=(r,e,t,...o)=>r==="rgb"?e==="ansi16m"?c[t].ansi16m(...o):e==="ansi256"?c[t].ansi256(c.rgbToAnsi256(...o)):c[t].ansi(c.rgbToAnsi(...o)):r==="hex"?S("rgb",e,t,...c.hexToRgb(...o)):c[t][r](...o),ae=["rgb","hex","ansi256"];for(let r of ae){p[r]={get(){let{level:t}=this;return function(...o){let n=N(S(r,U[t],"color",...o),c.color.close,this[d]);return x(this,n,this[h])}}};let e="bg"+r[0].toUpperCase()+r.slice(1);p[e]={get(){let{level:t}=this;return function(...o){let n=N(S(r,U[t],"bgColor",...o),c.bgColor.close,this[d]);return x(this,n,this[h])}}}}var ce=Object.defineProperties(()=>{},{...p,level:{enumerable:!0,get(){return this[M].level},set(r){this[M].level=r}}}),N=(r,e,t)=>{let o,n;return t===void 0?(o=r,n=e):(o=t.openAll+r,n=e+t.closeAll),{open:r,close:e,openAll:o,closeAll:n,parent:t}},x=(r,e,t)=>{let o=(...n)=>ue(o,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(o,ce),o[M]=r,o[d]=e,o[h]=t,o},ue=(r,e)=>{if(r.level<=0||!e)return r[h]?"":e;let t=r[d];if(t===void 0)return e;let{openAll:o,closeAll:n}=t;if(e.includes("\x1B"))for(;t!==void 0;)e=$(e,t.close,t.open),t=t.parent;let l=e.indexOf(`
`);return l!==-1&&(e=L(e,n,o,l)),o+e+n};Object.defineProperties(y.prototype,p);var fe=y(),Ae=y({level:Y?Y.level:0});var O=fe;Zilch.play=async function*(r){let e=r.config.initialTurn,t={board:r.config.initialBoard};for(;;){let o=pe(t)?.outcome??null;if(o!==null)return o;let n=e%2===0?0:1,l=r.bots[n],a=de(t);l.writeln(O.dim("Start turn"));let i=await l.move(a).then(be);l.writeln(O.dim(`\u2937 x=${i.x} y=${i.y}`));let m=t.board[i.x][i.y];if(typeof m=="number")return t.board[i.x][i.y]=[m,e],l.writeln(O.red(`
Spot { x: ${i.x}, y: ${i.y} } already occupied.`)),yield t,[n===0?u.BotOutcome.Error:u.BotOutcome.None,n===1?u.BotOutcome.Error:u.BotOutcome.None];t.board[i.x][i.y]=e,yield t,e++}};function be(r){let[e,t]=r.split(",").map(o=>{if(/(0|1|2)/.test(o))return parseInt(o)});if(e===void 0||t===void 0)throw new Error(`Response invalid: "${r}"`);return{x:e,y:t}}function de(r){return r.board.map(t=>t.map(o=>o===null?"empty":(Array.isArray(o)?o[0]%2===0:o%2===0)?"x":"o")).map(t=>t.join(",")).join("|")}function pe(r){let e={x:0,y:0},t={x:0,y:1},o={x:0,y:2},n={x:1,y:0},l={x:1,y:1},a={x:1,y:2},i={x:2,y:0},m={x:2,y:1},A={x:2,y:2},W=[[e,t,o],[n,l,a],[i,m,A],[e,n,i],[t,l,m],[o,a,A],[e,l,A],[i,l,o]];for(let f of[0,1]){let b=W.find(K=>K.every(j=>{let g=r.board[j.x]?.[j.y];return g===null?!1:(Array.isArray(g)&&(g=g[0]??0),g%2===f)}));if(b)return{winningLine:b,outcome:[f===0?u.BotOutcome.Victory:u.BotOutcome.Defeat,f===1?u.BotOutcome.Victory:u.BotOutcome.Defeat]}}for(let f=0;f<3;f++)for(let b=0;b<3;b++)if(r.board[f][b]===null)return null;return{outcome:[u.BotOutcome.Draw,u.BotOutcome.Draw]}}
//# sourceMappingURL=play.js.map
